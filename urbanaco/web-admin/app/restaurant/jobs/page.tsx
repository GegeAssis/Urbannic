'use client'; import {useEffect,useState} from 'react'; import api from '@/lib/api'; function Gen({jobId}:{jobId:string}){ const [n,setN]=useState('Courier Demo'); return(<span><input className='btn' value={n} onChange={e=>setN(e.target.value)}/> <button className='btn' onClick={async()=>{await api.post('/shifts',{jobId,courierName:n}); alert('Shift criado');}}>Gerar shift</button></span>);} export default function Page(){ const [jobs,setJ]=useState<any[]>([]); const [form,setF]=useState<any>({ title:'Turno almoço', shiftType:'DAILY', slots:2, startDate:new Date().toISOString().slice(0,10), endDate:new Date().toISOString().slice(0,10), remuneration:200 }); useEffect(()=>{api.get('/jobs').then(r=>setJ(r.data))},[]); return(<div className='card'><h1>Vagas</h1><div className='my-2'><input className='btn' value={form.title} onChange={e=>setF({...form,title:e.target.value})}/> <button className='btn' onClick={async()=>{const r=await api.post('/jobs',form); setJ([r.data,...jobs])}}>Criar</button></div><ul>{jobs.map(j=><li key={j.id}>{j.title} — {j.shiftType} — R$ {j.remuneration} <Gen jobId={j.id}/></li>)}</ul></div>)}
