'use client'; import {useParams} from 'next/navigation'; import {useEffect,useState} from 'react'; import api from '@/lib/api'; export default function Page(){ const {id}=useParams(); const [pk,setPk]=useState<any[]>([]); const [f,setF]=useState<any>({ customerName:'Cliente', customerPhone:'(31) 9 9999-9999', pickupAddress:'Rua A, 123', dropoffAddress:'Rua B, 456' }); const reload=async()=>{ const r=await api.get(`/shifts/${id}/packages`); setPk(r.data); }; useEffect(()=>{reload()},[id]); return(<div className='card'><h1>Pacotes do Shift {id as string}</h1><div className='my-2'><input className='btn' value={f.customerName} onChange={e=>setF({...f,customerName:e.target.value})}/> <button className='btn' onClick={async()=>{const r=await api.post(`/shifts/${id}/packages`, f); setPk([r.data,...pk])}}>Adicionar</button></div><ul>{pk.map(p=><li key={p.id}>{p.customerName} — {p.status} <button className='btn' onClick={async()=>{const r=await api.post(`/packages/${p.id}/advance`); setPk(pk.map(x=>x.id===p.id?r.data:x))}}>Avançar</button></li>)}</ul></div>)}
